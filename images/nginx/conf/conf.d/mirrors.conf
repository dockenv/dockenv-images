server
{    
    listen  80;
    listen 443 ssl http2;
    ssl_certificate /home/webs/ssl/mirrors.crt;
      ssl_certificate_key /home/webs/ssl/mirrors.key;
      ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
      ssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
      ssl_prefer_server_ciphers on;
      ssl_session_timeout 10m;
      ssl_session_cache builtin:1000 shared:SSL:10m;
      ssl_buffer_size 1400;
      add_header Strict-Transport-Security max-age=15768000;
      ssl_stapling on;
      ssl_stapling_verify on;
    server_name     cn.mirrors.xieke.org mirrors.gz.xieke.org;
    index index.html;
    root /home/webs/mirrors;
    access_log /data/wwwlogs/cloud.gz.xieke.org_nginx.log combined;
    
    location /ajax/ {
        proxy_pass          https://ajax.proxy.ustclug.org/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /apache/ {
        proxy_pass          https://mirrors.ustc.edu.cn/apache/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location /archlinux/ {
        proxy_pass          https://mirrors.ustc.edu.cn/archlinux/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /archlinuxcn/ {
        proxy_pass          https://mirrors.ustc.edu.cn/archlinuxcn/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /archlinuxarm/ {
        proxy_pass          https://mirrors.ustc.edu.cn/archlinuxarm/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /cpan/ {
        proxy_pass          https://mirrors.ustc.edu.cn/CPAN/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /debian/ {
        proxy_pass          https://mirrors.ustc.edu.cn/debian/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /docker-engine/ {
        proxy_pass          https://mirrors.aliyun.com/docker-engine/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /docker-toolbox/ {
        proxy_pass          https://mirrors.aliyun.com/docker-toolbox/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /eclipse/ {
        proxy_pass          https://mirrors.ustc.edu.cn/eclipse/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /gimp/ {
        proxy_pass          https://mirrors.ustc.edu.cn/gimp/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    
    location /gnome/ {
        proxy_pass          https://mirrors.ustc.edu.cn/gnome/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /gnu/ {
        proxy_pass          https://mirrors.ustc.edu.cn/gnu/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /hhvm/ {
        proxy_pass          https://mirrors.tuna.tsinghua.edu.cn/HHVM/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /ius/ {
        proxy_pass          https://mirrors.tuna.tsinghua.edu.cn/ius/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /libreoffice/ {
        proxy_pass          https://mirrors.ustc.edu.cn/tdf/libreoffice/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location /kali/ {
        proxy_pass          https://mirrors.ustc.edu.cn/kali/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /kde/ {
        proxy_pass          https://mirrors.ustc.edu.cn/kde/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /kernel/ {
        proxy_pass          https://mirrors.ustc.edu.cn/kernel.org/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /kubernetes/ {
        proxy_pass          https://mirrors.aliyun.com/kubernetes/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location /linuxmint/ {
        proxy_pass          https://mirrors.ustc.edu.cn/linuxmint/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /manjaro-arm/ {
        proxy_pass          https://mirrors.ustc.edu.cn/manjaro-arm/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /manjaro/ {
        proxy_pass          https://mirrors.ustc.edu.cn/manjaro/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }    
    
    location /mariadb/ {
        proxy_pass          https://mirrors.ustc.edu.cn/mariadb/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /mongodb/ {
        proxy_pass          https://mirrors.tuna.tsinghua.edu.cn/mongodb/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /mozilla/ {
        proxy_pass          http://releases.mozilla.com/pub/firefox/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /mysql/ {
        proxy_pass          https://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /nginx/ {
        proxy_pass          http://mirrors.sohu.com/nginx/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /npm/ {
        proxy_pass          https://registry.npm.taobao.org/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
   # location /npmjscom/ {
   #     proxy_pass          https://npm.proxy.ustclug.org/;
   #     proxy_redirect      off;
   #     proxy_set_header    X-Real-IP       $remote_addr;
   #     proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
   # }
    
    location /yarn/ {
        proxy_pass          https://registry.npm.taobao.org/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location /openvz/ {
        proxy_pass          https://mirrors.ustc.edu.cn/openvz/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /openwrt/ {
        proxy_pass          https://openwrt.proxy.ustclug.org/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /php/ {
        proxy_pass          http://mirrors.sohu.com/php/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /pypi/ {
        proxy_pass          https://mirrors.ustc.edu.cn/pypi/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /putty/ {
        proxy_pass          http://mirror.bit.edu.cn/putty/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /remi/ {
        proxy_pass          https://mirrors.tuna.tsinghua.edu.cn/remi/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /repoforge/ {
        proxy_pass          http://mirrors.sohu.com/dag/redhat/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /rpmfusion/ {
        proxy_pass          https://mirrors.ustc.edu.cn/rpmfusion/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /ruby/ {
        proxy_pass          https://mirrors.ustc.edu.cn/ruby/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /rubygems/ {
        proxy_pass          https://mirrors.ustc.edu.cn/rubygems/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /tails/ {
        proxy_pass          https://mirrors.kernel.org/tails/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /tltp/ {
        proxy_pass          https://mirrors.ustc.edu.cn/tldp/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /termux/ {
        proxy_pass          https://mirrors.tuna.tsinghua.edu.cn/termux/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /ubuntu/ {
        proxy_pass          https://mirrors.ustc.edu.cn/ubuntu/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /vim/ {
        proxy_pass          https://mirrors.ustc.edu.cn/vim/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location /virtualbox/ {
        proxy_pass          https://mirrors.tuna.tsinghua.edu.cn/virtualbox/;
        proxy_redirect      off;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
